@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860

*@
@model Diner
@{
    ViewData["Title"] = "Kies diner";
}

<body>
    @{
        Dossier dossier = ViewBag.Dossier;
        List<int> DinerIdList = new List<int>();
        List<Diner> DinerList = ViewBag.Diner;
        foreach (Diner d in ViewBag.Diner)
        {
            DinerIdList.Add(d.DinerId);

        }
    }
    <div class="container">
        <h1>
            Kies diner voor Dossier: @dossier.DossierName
        </h1>
        <div class="col-sm-10">
            @using (Html.BeginForm("Details", "Dossier", FormMethod.Post, new { @name = "DinerForm" }))
            {
                @Html.DropDownList("DinerId", new SelectList(DinerIdList), "Kies Diner", new { @id = "ddlDiner" })
            }
        </div>

        <form enctype="multipart/form-data" asp-controller="Dossier" asp-action="DossierDinerToevoegen" method="post" class="mt-3">
            <div class="form-group row d-none">
                <label asp-for="DinerId" class="col-sm-2 col-form-label">Diner</label>
                <div class="col-sm-10">
                    <select class="form-control" asp-for="DinerId"
                            asp-items="@(new SelectList(DinerIdList))" id="DinerSelecter">
                        <option type="checkbox" value="" disabled selected>Selecteer diner</option>
                    </select>
                </div>
            </div>
            <div class="form-group row">
                <button type="submit" class="btn btn-primary">Voeg diner toe</button>
            </div>
            <div id="DinerDetails"></div>
        </form>
    </div>
    <script>
        window.addEventListener('load', (event) => {
            console.log("loaded");
            document.getElementById("ddlDiner").value = @ViewBag.Selected
            document.getElementById("DinerSelecter").value = document.getElementById("ddlDiner").value;
            document.getElementById("ddlDiner").addEventListener('change', (event) => {
                document.getElementById("DinerSelecter").value = document.getElementById("ddlDiner").value;
                document.forms["DinerForm"].submit();
            })
        });
    </script>
</body>

